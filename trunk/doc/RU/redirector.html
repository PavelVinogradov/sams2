<HTML>
<HEAD>
<TITLE>Проект SAMS. Документация.</TITLE>
<META  content="text/html; charset=koi8-r" http-equiv="Content-Type">
</HEAD>
<BODY>

 <H2>Настройка редиректора SQUID</H2>

<P><B>Установка редиректора</B>
<P>Если Вы хотите, чтобы при работе прокси сервера вырезались графические объекты (баннеры и счетчики), необходимо настроить работу SQUID с редиректором
<BR>В сети можно найти вножество различных редиректоров, и чтобы не ограничивать ваш выбор редиректорами, с которыми работает SAMS, я решил не прописывать автоматически редиректор в squid.conf
<P>На данный момент SAMS настраивает работу трех редиректоров:
<LI> Редиректор SAMS - редиректор, работающий напрямую с базами SAMS
<LI> Rejik - Хороший быстрый редиректор.
<LI> SquidGuard - очень мощный редиректор.
<LI> Стандартный SQUID - простейший редиректор, описанный в документации к SQUID

<P><B>Редиректор SAMS</B>
<P>Написан специально для SAMS, напрямую использует информацию, содержащуюся в базе данных. Позволяет включить различное перенапраление запросов для пользователей (регулируется шаблонами пользователей).
<BR>Для включения этого редиректора необходимо в squid.conf добавить строчку:
<BR>redirect_program /usr/local/bin/samsredir
<P>Редиректор SAMS обеспечивает:
<LI> ограничение доступа пользователей к SQUID
<LI> контроль времени доступа пользователей к SQUID
<LI> ограниечение доступа пользователей к запрещенным ресурсам (или доступ пользователей 
ТОЛЬКО к разрешенным ресурсам)
<LI> перенаправление запросов пользователей к баннерам, счетчикам и т.п.
<P><em>При использовании редиректора SAMS в файл squid.conf заносятся acl, разрешающие доступ ВСЕХ пользователей 
к SQUID. Ограничение доступа пользователей организовано средствами редиректора</em> 

<P><B>Редиректор REJIK</B>
<P>Хороший быстрый редиректор. На сайте редиректора <A HREF="http://www.rejik.ru">(http://www.rejik.ru)</A>  
можно скачать списки баннерных, порно и пр. доменов.
<BR>Для включения этого редиректора необходимо в squid.conf добавить строчку:
<BR>redirect_program /путь/к/режик
<BR>В sams.conf необходимо добавить (исправить) строку:
<BR>REJIKPATH=/path/to/rejik
<BR>SAMS добавляет в файл конфигурации Rejik redirector.conf настройки на списки запрещенных доменов и 
перенаправления доступа SAMS. Настройки на списки, идущие с Режиком не изменяются и не удаляются.  
<BR>Редиректор Rejik не умеет сам ограничивать время работы пользователей. Ограничение времени производится самим  
SQUID (прописывается в squid.conf). 
<BR>Настраивайте Rejik согласно документации.
<P><em>При использовании редиректора Rejik в файл squid.conf заносятся acl, разрешающие доступ ВСЕХ пользователей 
к SQUID. Ограничение доступа пользователей организовано средствами редиректора</em>


<P><B>Редиректор SquidGuard</B>
<P>Мощный редиректор с большими возможностями. В состав редиректора 
<A HREF="http://www.squidguard.org">(http://www.squidguard.org)</A>
входят списки баннерных, порно и пр. доменов.
<BR>Для включения этого редиректора необходимо в squid.conf добавить строчку:
<BR>redirect_program /path/to/squidGuard
<BR>В sams.conf необходимо добавить (исправить) строку:
<BR>SQUIDGUARDDBPATH=/path/to/squidGuard.conf
<BR>SQUIDGUARDLOGPATH - не используется
<BR>SAMS добавляет в файл конфигурации SquidGuard squidguard.conf настройки на списки запрещенных доменов и 
перенаправления доступа SAMS. Настройки на списки, идущие с SquidGuard не изменяются и не удаляются. 
<BR>Настраивайте SquidGuard согласно документации.
<P><em>При использовании редиректора SquidGuard в файл squid.conf заносятся acl, разрешающие доступ ВСЕХ пользователей 
к SQUID. Ограничение доступа пользователей организовано средствами редиректора</em>

<P><B>Стандартный SQUID</B>
<P>Этот редиректор описан в документации на SQUID. Написан на perl. 
Редиректор создается после подачи команды на реконфигурирование SQUID, на основе списков перенаправления запросов. 
Быстрый и легкий редиректор, но не различает пользователей.
<BR>Для включения этого редиректора необходимо в squid.conf добавить строчку:
<BR>redirect_program /etc/squid/redirect.sams
<BR>При использовании этого редиректора, ограничение доступа пользователей по спискам запрета доступа организовано
 с использованием ACL SQUIDa

<P>При использовании редиректора SQUID или если редиректор не используется вовосе, то в существует возможность:
<BR> при отключении пользователей за превышение трафика у них остается доступ к URL и IP адресам, прописанным в 
списке "Локальные домены".



<P> Для выбора редиректора, используемого с SAMS, необходимо в настройках SAMS выбрать редиректор, 
который планируется использовать. Если будет использоваться другой редиректор, или редиректор вообще не 
будет использоваться, выберите пункт "Не использовать редиректор" или "Встроенный SQUID".


</BODY>
</HTML>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>

<HEAD>
  <META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
  <TITLE>SAMS2 - Параметры командной строки</TITLE>
  <META NAME="GENERATOR" CONTENT="Andrey Ovcharov">
  <META NAME="AUTHOR" CONTENT="Andrey Ovcharov">
</HEAD>

<BODY LANG="ru-RU" TEXT="#000000" LINK="#000080" VLINK="#800000" DIR="LTR">

<TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0">
  <TR>
    <TH COLSPAN="3" ALIGN="center">SAMS2 Приложения</TH>
  </TR>
  <TR>
    <TD WIDTH="33%" ALIGN="left" VALIGN="top"><BR></TD>
    <TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index.html">Оглавление</A></TD>
    <TD WIDTH="33%" ALIGN="right" VALIGN="top"><BR></TD>
  </TR>
</TABLE>
<HR ALIGN="LEFT" WIDTH="100%">

<H1>Приложение 1. Параметры командной строки</H1>

<H2><A NAME="#samsparser">samsparser</A></H2>

<P>
Программа предназначена для обработки дополнительных (архивных) лог файлов SQUID и работы с БД.
Может использоваться как альтернатива демону в части подсчета трафика.
</P>

<P>
Некоторые команды могут быть указаны одновременно. Если ни одна команда не указана,
то используется <A HREF="#parser.update">--update</A>. Если указаны несколько команд,
то они выполняются в следующем порядке:
<LU>
  <LI>Обновление базы данных (команда <A HREF="#parser.update">--update</A>)</LI>
  <LI>Експорт кеша во внешний файл (команда <A HREF="#parser.export">--export</A>)</LI>
  <LI>Очистка счетчиков пользователей (команда <A HREF="#parser.clear">--clear</A>)</LI>
  <LI>Очистка информации о трафике (команда <A HREF="#parser.truncate">--truncate</A>)</LI>
</LU>
На все команды действуют фильтры <A HREF="#parser.user">--user</A> и <A HREF="#parser.date">--date</A>, если они указаны.
</P>

<BR>
<BR>

<TABLE WIDTH="100%" BORDER="1" CELLPADDING="3" CELLSPACING="0">
  <TR>
    <TH WIDTH="15%">Команда</TH>
    <TH WIDTH="85%">Описание</TH>
  </TR>

  <TR>
    <TD>-h, --help</TD>
    <TD>Выводит список параметров с небольшим описанием и завершает работу.</TD>
  </TR>
  <TR>
    <TD>-V, --version</TD>
    <TD>Выводит версию программы и завершает работу.</TD>
  </TR>
  <TR>
    <TD><A NAME="parser.update">-u, --update</A></TD>
    <TD>
      Обновляет информацию о трафике из лог файла SQUID. По умолчанию обрабатывается текущий
      лог файл начиная с места последней обработки. Если дополнительно указывается параметр
      --file, то обрабатывается указанный файл с самого начала и
      <A HREF="tables.html#proxy.s_endvalue">смещение в файле</A> не обновляется.
    </TD>
  </TR>
  <TR>
    <TD><A NAME="parser.export">-e, --export</A></TD>
    <TD>
      Записывает во внешний файл подробную информацию о трафике. Если параметр --file не указан,
      то используется файл squid.log в текущей директории.
    </TD>
  </TR>
  <TR>
    <TD><A NAME="parser.clear">-c, --clear</A></TD>
    <TD>Обнуляет счетчики пользователей.</TD>
  </TR>
  <TR>
    <TD><A NAME="parser.truncate">-t, --truncate</A></TD>
    <TD>Очищает информацию о трафике в БД.</TD>
  </TR>
</TABLE>

<BR>
<P>
Обязательные аргументы для параметров в полном варианте, так же обязательны для краткого варианта.
</P>
<BR>

<TABLE WIDTH="100%" BORDER="1" CELLPADDING="3" CELLSPACING="0">
  <TR>
    <TH WIDTH="15%">Параметр</TH>
    <TH WIDTH="85%">Описание</TH>
  </TR>
  <TR>
    <TD>-f, --file=FILE</TD>
    <TD>Use FILE for update or export (DEFAULT: squid.log).</TD>
  </TR>
  <TR>
    <TD><A NAME="parser.user">-U, --user=LIST</A></TD>
    <TD>
      Perform all operations for listed users only (DEFAULT: all).
      LIST is a list of users, separated by comma (e.g. DOMAIN+user1,192.168.1.1,user2).
    </TD>
  </TR>
  <TR>
    <TD><A NAME="parser.date">-D, --date=DATE_INTERVAL</A></TD>
    <TD>
      Perform all operations for listed date interval only (DEFAULT: all).
      DATE_INTERVAL is two dates, separated by comma.
      The date specification is YYYY-MM-DD
      E.g. -D 2007-01-01,2007-01-31.
    </TD>
  </TR>
  <TR>
    <TD>-v, --verbose</TD>
    <TD>Produce more output.</TD>
  </TR>
  <TR>
    <TD>-d, --debug=LEVEL</TD>
    <TD>
      Produce lots of debugging information depend on LEVEL.
      For more information about possible LEVEL values refer to a developer.
    </TD>
  </TR>
  <TR>
    <TD>-l, --logger=LOGGER</TD>
    <TD>
      Set engine for messages output. Possible values for LOGGER are: console, syslog, file.
      In case of file you can set filename for output (DEFAULT: samsparser.log).
      E.g. -l syslog
      E.g. -l file:/path/to/file
    </TD>
  </TR>
  <TR>
    <TD>-C, --config=FILE</TD>
    <TD>Use config file FILE.</TD>
  </TR>
  <TR>
    <TD>-w, --wait-myself</TD>
    <TD>
      If already running program found, do not exit immediatly,
      but wait until it ends and finish the task.
    </TD>
  </TR>
</TABLE>

<H2><A NAME="#samsdaemon">samsdaemon</A></H2>

<P>
Демон предназначен для подсчета трафика через определенный интервал времени
(интервал указывается в web интерфейсе), автоматической блокировки и очистки счетчиков пользователей,
внесения различных правил в конфигурационный файл SQUID и его реконфигурирования, экспорта подробной
информации о трафике во внешний файл и автоматической очистки устаревших данных.
</P>

<H2><A NAME="#samsredir">samsredir</A></H2>

<P>
Редиректор предназначен для снижения трафика путем обрезания рекламы, так-же при блокировке доступа
показывает расширенную информацию о причине блокировки.
</P>

<HR ALIGN="LEFT" WIDTH="100%">
<TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0">
  <TR>
    <TD WIDTH="33%" ALIGN="left" VALIGN="top"><BR></TD>
    <TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="index.html">Оглавление</A></TD>
    <TD WIDTH="33%" ALIGN="right" VALIGN="top"><BR></TD>
  </TR>
</TABLE>

</BODY>
</HTML>

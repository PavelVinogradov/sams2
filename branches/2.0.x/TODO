1) База данных
+ 1.1) В таблице proxy поле s_userdomain должно быть s_usedomain
  1.2) В таблице proxy поля s_kbsize и s_mbsize поменять тип на integer
  1.3) В таблице websettings поле s_version должно соответствовать значению VERSION
       всего пакета, иначе никакие операции с БД производится не будут
- 1.4) В таблице reconfig удалить поле s_number
- 1.5) В таблице squiduser в поля s_size и s_hit добавить атрибут UNSIGNED
+ 1.6) ALTER TABLE proxy  ADD s_autouser    INT           NOT NULL DEFAULT 0,
                          ADD s_autotpl     INT           NULL DEFAULT NULL,
                          ADD s_autogrp     INT           NULL DEFAULT NULL,
+ 1.7) Индексы в таблицах определены либо избыточно, либо неверно
       [таблица proxy]
       s_proxy_id: UNIQUE(s_proxy_id) - удалить, так как поле s_proxy_id уже является первичным ключем

       [таблица redirect]
       s_redirect_id: UNIQUE(s_redirect_id) - удалить, так как поле s_redirect_id уже является первичным ключем

       [таблица samslog]
       s_log_id: UNIQUE(s_log_id) - удалить, так как поле s_log_id уже является первичным ключем
       idx_samslog: UNIQUE(s_code, s_issuer)

       [таблица sgroup]
       s_group_id: UNIQUE(s_group_id) - удалить, так как поле s_group_id уже является первичным ключем

       [таблица shablon]
       s_shablon_id: UNIQUE(s_shablon_id) - удалить, так как поле s_shablon_id уже является первичным ключем

       [таблица squidcache]
       s_cache_id: UNIQUE(s_cache_id) - удалить, так как поле s_cache_id уже является первичным ключем
       idx_squidcache: UNIQUE(s_user, s_proxy_id)

       [таблица cachesum]
       idx_cachesum: UNIQUE(s_user, s_proxy_id) - переопределить как UNIQUE(s_proxy_id, s_date, s_domain, s_user)

       [таблица squiduser]
       s_user_id: UNIQUE(s_user_id) - удалить, так как поле s_user_id уже является первичным ключем
       idx_squiduser: UNIQUE(s_nick, s_name, s_shablon_id, s_group_id) - переопределить как INDEX(s_nick, s_shablon_id, s_group_id)

       [таблица timerange]
       s_trange_id: UNIQUE(s_trange_id) - удалить, так как поле s_trange_id уже является первичным ключем

       [таблица url]
       s_url_id: UNIQUE(s_url_id) - удалить, так как поле s_url_id уже является первичным ключем

  1.8) Когда очищать таблицу samslog?
- 1.9) Если в таблицу redirect вставить внешний ключ s_trange_id из таблицы timerange,
       то можно значительно расширить функционал. Т.е. появляется возможность независимо от шаблона
       задавать отдельные временные рамки для ресурсов в интернете.
       Применение: 1) запретить качать музыку (видео, ...) в рабочее время
                   2) запретить аську в рабочее время
                   3) Еще чего-нибудь запретить :)

2) WEB интерфейс
  2.1) Редактирование списка локальных адресов (доменов): не работает изменение
- 2.2) Нет возможности переименовывать группы пользователей
- 2.3) При изменении данных одного пользователя неверно устанавливаются
       первоначальные (существующие) Группа, Активность, Шаблон.
       Там-же предлагаю строку 'Пользователь активен' переименовать в 'Статус'
       (просто выглядит лаконичней)
- 2.4) При просмотре шаблона там где можно переместить других пользователей в текущий шаблон
       При выборе другого шаблона в выпадающем списке для получения списка пользователей,
       текущее значение выпадающего списка остается неизменным, хотя в списке пользователей появляются
       из выбранного шаблона.
- 2.5) Хотелка: При перемещении пользователя из шаблона в шаблон менять квоту пользователя на квоту нового шаблона,
       но только если текущая квота пользователя совпадает с квотой старого шаблона. Это как при перемещении во
       время просмотра шаблона, так и при редактировании данных одного пользователя.
- 2.6) При добавлении одного пользователя предлагаю либо убрать поле 'Разрешенный трафик', либо предлагать значение
       из выбираемого шаблона.
- 2.7) При просмотре одного пользователя, поле 'Активен' может иметь значения 'Да' и 'Отключен', нужно определится
       либо поле 'Активен' и значения Да/Нет, либо поле 'Статус' и значения Активен/Отключен/Заблокирован
- 2.8) Для выборки интересующей части из даты (времени) в PostgreSQL:
       select extract(hour from s_timestart), extract(minute from s_timeend) from timerange;
       а для выборки в MySQL
       select HOUR(s_timestart), MINUTE(s_timeend) from timerange;
  2.9) Не работает редактирование списка регулярных выражений
- 2.10) При удалении шаблона не проверяется принадлежит ли он какому-либо пользователю
+ 2.11) При создании нового шаблона нельзя выбрать не IP авторизацию, хоть и можно выбрать при изменении.
  2.12) При редактировании 'WEB interface settings' не заполняются поля Kilobyte size, Megabyte size
  2.13) При редактировании настроек прокси сервера выпадающие меню 'Домен пользователя в access.log записывть буквами'
        и 'Имя пользователя в access.log записывать буквами' становятся недоступными только если ИЗМЕНИТЬ тип авторизации
        на NCSA или IP.
  2.14) При редактировании настроек прокси сервера если поле 'обрабатывать через' запрещено, то оно остается запрещенным
        до тех пор, пока не сохранить изменения и снова зайти в настройки прокси сервера.
  2.15) При редактировании настроек прокси сервера не анализируется/сохраняется поле
        'Сохранять данные о трафике в базе за последние N месяцев'
  2.16) При редактировании настроек шаблона 'Период лимита трафика' не заполняется, если установлен нестандартный период.
  2.17) В дереве нет списка временных границ, соответственно ни исправить ни удалить нельзя
  2.18) Хотелка: был удивлен случайно обнаружив что на некоторых страницах есть ссылки (переходы) на другие, было бы неплохо
        видеть это наглядно, а не шарить мышкой и ждать когда же курсор изменится
  2.19) При добавлении еще одного прокси сервера он не появляется в списке слева пока не перезагрузишь страницу (F5)

3) Демоны
  3.1) Оптимизировать заполнение таблицы cachesum
+ 3.2) В цикле samsdaemon учитывать время обработки команды
  3.3) Продумать порядок работы с файлами конфигураций squid, rejik, squidGuard
+ 3.4) Переподключаться к БД каждый час
  3.5) Определять директорию pid файлов на этапе конфигурирования
  3.6) Учитывать ли трафик при отказе в запросе? Если ответ от squid TCP_DENIED или UPP_DENIED,
       то все равно какой-то трафик расходуется, пусть и маленький


4) Разное
  4.1) В sams2.conf изменить MYSQLHOSTNAME на DB_SERVER, а DBNAME на DB_ENGINE
       Возможные значения параметра DB_ENGINE: MySQL, PostgreSQL, unixODBC, при этом регистр не должен иметь значения

  4.2) Зачем в sams2.conf параметр ODBC? Как работать с БД прекрасно описывает параметр DB_ENGINE

Увеличить размер url адреса до 1024 символов
для начала в таблице squidcache

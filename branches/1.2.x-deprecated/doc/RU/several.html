<HTML>
<BODY>

<H2 align="center">Управление несколькими прокси-серверами SQUID  </H2>

SAMS способен управлять несколькими прокси-серверами SQUID. 
В данный момент SAMS может дать только команду на реконфигурирование конкретного прокси-сервера SQUID, 
а также восстанавливать файлы из кэша SQUID.
Команда на реконфигурирование дается демону samsdaemon, с указанием номера прокси-сервера, под которым 
он зарегистрирован в WEB интерфейсе SAMS.
<BR>Для того, чтобы samsdaemon мог идентифицировать себя, в sams.conf введен ключ CACHENUM
<BR><B>CACHENUM=номер</B>
  
<BR>Если SAMS управляет только одним прокси-сервером, то ключ CACHENUM необходимо задать равным 0, или 
можно не задавать вообще. samsdaemon читает файл squid.conf, и если ключ CACHENUM ненайден, он 
по-умолчанию берется равным 0.

<P>Если вы хотите управлять несколькими прокси-серверами, то вам необходимо ка каждом сервере:
<BR><LI>Зарегистрировать прокси-сервер в web-интерфейсе SAMS;
<BR><LI>Установить SAMS на прокси-сервере;
<BR><LI>Номер, под которым прокси-сервер зарегистрирован в SAMS, занести в sams.conf в пареметр CACHENUM;
<BR><LI>Зарегистрировать в MySQL пользователя sams от прокси-сервера SQUID:
<BR>GRANT ALL ON squidctrl.* TO sams@ipaddr IDENTIFIED BY "yourpassword";
<BR>GRANT ALL ON squidlog.* TO sams@ipaddr IDENTIFIED BY "yourpassword"; 
<P>где: ipaddr  - ip адрес хоста, где установлен MySQL. localhost - если mysql установлен на той же 
системе, на которой установлен SQUID, XXX.XXX.XXX.XXX - если на другом сервере.
<P><LI>В sams.conf необходимо занести:
<BR>MYSQLHOSTNAME=ipaddr  - ip адрес хоста, где установлен MySQL.
<BR>MYSQLUSER=sams - Имя пользователя MySQL, от имени которого будет работать SAMS
<BR>MYSQLPASSWORD=yourpasswd - Пароль пользователя в MySQL
<BR><LI>Настроить sams.conf
<BR><LI>Запустить samsdaemon

<P><B>Реализация восстановления файлов из кэша SQUID при управлении несколькими серверами</B>
<P>WEB интерфейс дает команду на восстановление файлов samsdaemon. samsdaemon копирует файл в каталог 
/usr/local/share/sams/data. Если кэш находится на той же системе, что и WEB интерфейс, то файл можно будет 
загрузить из WEB интерфейса SAMS. Если WEB интерфейс находится на другой системе, то файл нужно скачивать 
используя SSH или FTP доступ

</BODY>
</HTML>
